# 3장. 템플릿

---

## 템플릿이란?

바뀌는 성질이 다른 코드 중에서 변경이 거의 일어나지 않으며 일정한 패턴으로 유지되는 특성을 가진 부분을 자유롭게 변경되는 성질을 가진 부분으로부터 독립시켜서 효과적으로 활용할 수 있도록 하는것

---

## 템플릿 메서드 패턴의 적용

템플릿 메서드 패턴은 상속을 통해 기능을 확장해서 사용하는 부분입니다.

장점 - 클래스의 기능을 확장하고 싶을 때마다 상속을 통해 자유롭게 확장할 수 있습니다.

단점 - 확장 구조가 클래스를 설계하는 시점에서 고정되어 버립니다. 즉 서브 클래스들이 이미 클래스 레벨에서 컴파일 시점에 그 관계까 결정되어 있다는 것입니다.

> 단점에 의해 관계에 대한 유연성이 떨어져 버립니다.   
> 이는 상속을 통해 확장을 꾀하는 템플릿 메서드 패턴의 단점입니다.

---

## 전략 패턴

전략패턴이란 ?   
오브젝트를 아예 둘로 분리하고 클래스 레벨에서는 인터페이스를 통해서만 의존하도록 만드는 것입니다.

OCP 관점에서 보면 확장에 해당하는 변하는 부분을 별도의 클래스로 만들어 추상화된 인터페이스를 통해 위임하는 방식입니다.
보통 변하는 부분인 전략을 바깥에서 주입받아서 관계를 유연하게 하는 것입니다. 

---

## 의존 관계(DI)의 다양한 방법

DI의 가장 중요한 개념은 제 3자의 도움을 통해 두 오브젝트 사이의 유연한 관계가 설정되도록 만든다는 것.   
이 개념만 따른다면 DI를 이루는 오브젝트와 구성요소의 구조나 관계는 다양하게 만들 수 있습니다.


### 일반적인 DI
* 두개의 오브젝트
* 두 오브젝트의 관계를 다이나믹(동적)하게 설정해주는 오브젝트 팩토리(DI 컨테이너)
* 오브젝트 팩토리를 사용하는 클라이언트

일반적으로 DI는 위와같은 4개의 오브젝트 사이에서 일어납니다.   

### 마이크로 DI

하지만 때로는 아래와 같은 형식으로 DI가 일어납니다.
* 원시적인 전략 패턴 구조를 따라 클라이언트가 오브젝트 팩토리의 책임을 함꼐 지니고 있을 수도 있습니다.
* 클라이언트와 전략(의존 오브젝트)이 결합될 수 있습니다.
* 클라이언트와 DI 관계에 있는 두 개의 오브젝트가 모두 하나의 클래스 안에 담길 수 도 있습니다.

이런 경우 DI가 매우 작은 단위의 코드와 메서드 사이에서 일어나기도 합니다.      
얼핏 보면 DI 같아 보이지 않지만 작은 단위로 DI가 이뤄지고 있음을 홗인할 수 있습니다.   

> 이렇게 DI의 장점을 단순화해서 IoC 컨테이너의 도움 없이 코드 내에서 적용한 경우를 마이크로 DI 라고 부릅니다.   
> 또는 코드에 의한 DI 라는 의미로 수동 DI 라고 부를 수도 있습니다.
